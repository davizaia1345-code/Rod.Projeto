<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Barbearia do Rod</title>
  <link rel="stylesheet" href="rod.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

<div id="area-usuario" style="display: none;">
    
    <div id="logado" style="display: none; align-items: center;">
        <span id="boas-vindas" style="margin-right: 15px;"></span>
        
        <a href="admin.html" id="btn-painel-dono" style="display: none; background-color: #d4af37; color: #000; padding: 6px 12px; border-radius: 4px; text-decoration: none; font-weight: bold; font-size: 0.9em; margin-right: 10px;">
            <i class="fas fa-user-cog"></i> Painel
        </a>

        <a href="meus-agendamentos.html" style="background-color: #333; color: white; padding: 6px 12px; border-radius: 4px; text-decoration: none; font-size: 0.9em; margin-right: 10px;">
            <i class="far fa-calendar-alt"></i> Meus Cortes
        </a>

        <button onclick="fazerLogout()" class="btn-sair">Sair</button>
    </div>

    <div id="deslogado" style="display: none;">
         <span>Ainda n√£o tem conta? </span>
         <a href="login.html" class="link-entrar">Entrar / Cadastrar</a>
    </div>
</div>

<header class="navbar">
    <div class="logo">
        <span class="logo-icon">/</span> RODBARBER
    </div>
    
    <nav>
        <ul class="nav-links">
            <li><a href="#agendamento">Agendamento</a></li>
            <li><a href="#sobre">Sobre</a></li>
            <li><a href="#precos">Pre√ßos</a></li>
            <li><a href="#contatos">Contatos</a></li>
            
            <li id="btn-admin" style="display: none;">
                <a href="admin.html" style="color: #d4af37; font-weight: bold;">üëë ADMIN</a>
            </li>
        </ul>
    </nav>

    <a href="#agendamento" class="btn-book">Book Now</a>
</header>
<br><br><br><br>

<main class="hero">
    <div class="hero-content">
        <h1>Muito Al√©m de um Corte, Uma Experi√™ncia de Cuidado Masculino.</h1>
        
        <div class="address">
            <p>o melhor lugar</p>
            <p>para agendar seu corte.</p>
        </div>
    </div>

    <section class="container" id="agendamento">
        
        <div id="aviso-bloqueio" style="text-align: center; padding: 30px; display: block;">
            <p style="margin-bottom: 20px;">Voc√™ precisa estar logado para agendar um hor√°rio.</p>
            <a href="login.html" style="background-color: #ff0000; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: bold;">
                Fazer Login ou Cadastrar
            </a>
        </div>

        <div id="area-formulario" style="display: none;">
            <form id="form-agendamento">
                <label>Nome:</label>
                <input type="text" id="nome" required readonly style="background-color: #242121; cursor: not-allowed;">
                
                <label>E-mail:</label>
                <input type="email" id="email" required readonly style="background-color: #242121; cursor: not-allowed;">
                
                <label>Data:</label>
                <input type="date" id="data" required>
                
                <label>Hor√°rio:</label>
                <input type="time" id="hora" required>
                
                <button type="submit">Agendar Agora</button>
            </form>
            <p id="mensagem"></p>
        </div>
    </section>
</main>
<br><br><br>

<section class="about-section" id="sobre">
    <div class="about-container">
        <div class="about-content">
            <h2 class="about-title">SOBRE</h2>
            <p class="about-text">
               A trajet√≥ria de <strong>Rodney Abr√£o</strong> no mercado come√ßou em 2022. O que iniciou como um desafio na barbearia de um grande amigo de inf√¢ncia, rapidamente se transformou em uma carreira de excel√™ncia.
               <br><br>
               Hoje, Rodney n√£o √© apenas um barbeiro, mas um especialista que busca constantemente a perfei√ß√£o. Com diversos certificados t√©cnicos e especializa√ß√µes no curr√≠culo, ele domina desde os cortes cl√°ssicos at√© as tend√™ncias mais modernas do mercado. Cada atendimento √© guiado pela precis√£o t√©cnica e pelo respeito √† hist√≥ria de cada cliente, garantindo que o seu visual esteja sempre em m√£os profissionais e atualizadas.
            </p>
        </div>

        <div class="about-image-wrapper">
            <img src="https://i.ibb.co/nqhFH490/Whats-App-Image-2026-01-20-at-18-56-57.jpg" alt="Foto de Rodney Abr√£o" class="about-img">
        </div>
    </div>
</section>

<section class="container" id="precos">
    <h2>Tabela de Pre√ßos</h2>
    <div class="precos-grid">
        <div class="preco-item"><span>Corte Masculino</span> <span>R$ 40,00</span></div>
        <div class="preco-item"><span>Barba Completa</span> <span>R$ 20,00</span></div>
        <div class="preco-item"><span>Corte + Barba</span> <span>R$ 60,00</span></div>
        <div class="preco-item"><span>Sobrancelha</span> <span>R$ 10,00</span></div>
    </div>
</section>

<section class="container">
    <h2>Nossos Cortes</h2>
    <div class="galeria">
        <img src="https://images.unsplash.com/photo-1503951914875-452162b0f3f1?q=80&w=250&h=250&auto=format&fit=crop" alt="Corte Degrad√™">
        <img src="https://images.unsplash.com/photo-1621605815841-aa88c82b02aa?q=80&w=250&h=250&auto=format&fit=crop" alt="Barba Estilizada">
        <img src="https://images.unsplash.com/photo-1585747860715-2ba37e788b70?q=80&w=250&h=250&auto=format&fit=crop" alt="Corte Cl√°ssico">
    </div>
</section>

<div class="social-floating">
    <a href="https://www.instagram.com/souzard_barber/" target="_blank" class="btn-float instagram">
        <i class="fab fa-instagram"></i>
    </a>
    <a href="https://wa.me/5511949411527?text=Ol√°!%20Gostaria%20de%20agendar%20um%20hor√°rio." target="_blank" class="btn-float whatsapp">
        <i class="fab fa-whatsapp"></i>
    </a>
</div>

<footer id="contatos">
    <p>üìç Rua M√°rio Ferraz de Souza, 889, Cidade Tiradentes, S√£o Paulo SP</p>
    <p>¬© 2026 Barbearia do Rod</p>
</footer>

<script>
    window.onload = function() {
        const nomeUsuario = localStorage.getItem('usuarioNome');
        const emailUsuario = localStorage.getItem('usuarioEmail');
        
        
        const areaUsuario = document.getElementById('area-usuario');
        const divLogado = document.getElementById('logado');
        const divDeslogado = document.getElementById('deslogado');
        const spanNome = document.getElementById('boas-vindas');

        const btnAdminMenu = document.getElementById('btn-admin');
        const btnPainelDono = document.getElementById('btn-painel-dono');
        const emailDono = "rdbarbercontato@gmail.com"; 

        const divAviso = document.getElementById('aviso-bloqueio');
        const divForm = document.getElementById('area-formulario');

        if (nomeUsuario && emailUsuario) {

            if(areaUsuario) areaUsuario.style.display = 'block'; 
            if(divLogado) divLogado.style.display = 'flex';
            if(divDeslogado) divDeslogado.style.display = 'none';
            if(spanNome) spanNome.innerText = "Ol√°, " + nomeUsuario + "!";

            if (emailUsuario === emailDono) {
                if(btnAdminMenu) btnAdminMenu.style.display = 'block';
                if(btnPainelDono) btnPainelDono.style.display = 'inline-block';
            } else {
                if(btnAdminMenu) btnAdminMenu.style.display = 'none';
                if(btnPainelDono) btnPainelDono.style.display = 'none';
            }
            
            
            if(divAviso) divAviso.style.display = 'none';
            if(divForm) divForm.style.display = 'block';
            
            
            const campoNome = document.getElementById('nome');
            const campoEmail = document.getElementById('email');
            if(campoNome) campoNome.value = nomeUsuario;
            if(campoEmail) campoEmail.value = emailUsuario;

        } else {
        
            if(areaUsuario) areaUsuario.style.display = 'none'; 
            if(divLogado) divLogado.style.display = 'none';
            
           
            
        
            if(divAviso) divAviso.style.display = 'block';
            if(divForm) divForm.style.display = 'none';
        }
    };

    function fazerLogout() {
        localStorage.clear();
        window.location.href = 'login.html';
    }

    const form = document.getElementById("form-agendamento");
    const mensagem = document.getElementById("mensagem");

    if(form) {
        form.addEventListener("submit", async (event) => {
            event.preventDefault();
            
            const botao = form.querySelector("button");
            botao.disabled = true;
            botao.innerText = "Agendando...";

            const dados = {
                nome: document.getElementById("nome").value,
                email: document.getElementById("email").value,
                data: document.getElementById("data").value,
                hora: document.getElementById("hora").value
            };

            try {
                const response = await fetch('http://localhost:3001/agendar', {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(dados)
                });

                const result = await response.json();

                if (response.ok) {
                    mensagem.innerText = "Agendamento realizado e e-mail enviado! ‚úÖ";
                    mensagem.style.color = "lightgreen";
                    form.reset();
                    
                    document.getElementById('nome').value = localStorage.getItem('usuarioNome');
                    document.getElementById('email').value = localStorage.getItem('usuarioEmail');
                } else {
                    mensagem.innerText = "Erro: " + result.mensagem;
                    mensagem.style.color = "#ff6b6b";
                }
            } catch (error) {
                mensagem.innerText = "Erro de conex√£o com o servidor ‚ùå";
                mensagem.style.color = "#ff6b6b";
            } finally {
                botao.disabled = false;
                botao.innerText = "Agendar Agora";
            }
        });
    }
</script>
</body>
</html>